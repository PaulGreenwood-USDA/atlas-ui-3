{{- /*
Secret for S3 credentials consumed by main/auth apps
If using MinIO, synthesize from values.minio.rootUser/rootPassword
If using external S3, reference existing secret via values.s3.external.accessKeySecretName
*/ -}}
{{- if .Values.s3.useMinio }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "atlas.fullname" . }}-s3
  labels:
    {{- include "atlas.labels" . | nindent 4 }}
stringData:
  accessKey: {{ .Values.minio.rootUser | quote }}
  secretKey: {{ .Values.minio.rootPassword | quote }}
{{- else if .Values.s3.external.enabled }}
# No secret created; external secret must exist: {{ .Values.s3.external.accessKeySecretName }}
{{- end }}
